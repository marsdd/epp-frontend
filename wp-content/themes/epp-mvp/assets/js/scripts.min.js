"use strict";(function(a){"use strict";a(function(){a("body").hasClass("page-template-page-pathways")||localStorage.removeItem("epp_mvp_current_path"),a.validate({form:"#signup-form, #login-form, #update-profile-form, #change-password-form, #name-your-pathway-form, #form--initiate-password-reset",borderColorOnError:"",errorElementClass:"is-invalid",scrollToTopOnError:!1});var e=a(window).width(),t=a(window).height();a("[data-toggle=\"tooltip\"]").tooltip(),a(".mobile-menu-btn").click(function(){return a(this).toggleClass("menu-open"),a(this).find("span").toggleClass("active"),a("body, .content-body, .mobile-menu-bar, .mobile-nav").toggleClass("menu-open"),!1}),a(document).on("click",".blocking",function(){return closePopupsEtAl(),!1}),a(document).on("click",".popup__close",function(){return closeLoginSignup(),!1}),a("input[type=\"text\"], input[type=\"email\"], input[type=\"tel\"], input[type=\"password\"], input[type=\"number\"], textarea").focus(function(){a(this).siblings("label").addClass("focused")}),a("input[type=\"text\"], input[type=\"email\"], input[type=\"tel\"], input[type=\"password\"], input[type=\"number\"], textarea").focusout(function(){0!=a(this).val().length&&a(this).siblings("label").addClass("focused"),0===a(this).val().length&&a(this).siblings("label").removeClass("focused")}),a(document).on("click",".radio-label",function(){a(".radio-label").removeClass("checked-label"),a(this).find("input").prop("checked",!0)?(a(this).addClass("checked-label"),a(this).closest(".form-group").hasClass("related-group")&&a(this).closest(".form-group").next().find("input[type=\"text\"]").focus()):a(this).removeClass("checked-label")}),a(".related-input").focus(function(){a(".radio-label").removeClass("checked-label"),a(this).closest(".form-group").prev().find("input[type=\"radio\"]").prop("checked",!0)}),a(document).on("click",".build-pathway-btn",function(){return a(this).hide(),a(".input--build-pathway, .pathway-gradient-border").show(),a(".input--build-pathway").focus(),!1}),a(".input--build-pathway").blur(function(){return a(".input--build-pathway, .pathway-gradient-border").hide(),a(".build-pathway-btn").show(),a(".build-pathway-form")[0].reset(),a(".input--build-pathway").removeClass("has-value"),!1}),a(document).on("click",".search-occupations-btn",function(){return a(".form--search-occupations")[0].reset(),a(this).hasClass("active")?(a(this).removeClass("active"),a(".menu--secondary").css("border",""),a(".form--search-occupations, .blocking").removeClass("visible"),setTimeout(function(){a(".form--search-occupations, .blocking").removeClass("active"),a("body").removeClass("search-occupations-active")},400)):(a("body").addClass("search-occupations-active"),a(this).addClass("active"),a(".menu--secondary").css("border","none"),a(".form--search-occupations, .blocking").addClass("visible"),setTimeout(function(){a("#search-occ-input").focus(),a(".form--search-occupations, .blocking").addClass("active")},400)),!1}),a(document).on("click",".launch-login",function(){var e=a(this).attr("href");return"#"==e?a("#redirect-after-login").val(""):a("#redirect-after-login").val(e),launchLoginPopup(),!1});var o;a(window).on("resize",function(){clearTimeout(o),o=setTimeout(function(){992<=a(window).width()&&(a("#page-wrapper").show(),a(".mobile-menu-btn span").removeClass("active"),a(".mobile-menu-btn, body, #page-wrapper, .mobile-menu-bar, .mobile-nav, .content-body").removeClass("menu-open"),a("#page-wrapper").removeClass("opaque"),closePopupsEtAl())},250)})}),a(window).on("load",function(){if(setTimeout(function(){a("body").addClass("loaded"),a(".site-loading").fadeOut(500)},500),a("body").hasClass("logged-in")){if(null!==localStorage.getItem("epp_mvp_save_user_path")&&(1==localStorage.getItem("epp_mvp_save_user_path")||"1"==localStorage.getItem("epp_mvp_save_user_path"))){var e=EPP_DATA.site_url+"/wp-json/api/v1/pathways/save",t=localStorage.getItem("epp_mvp_unsaved_path_name"),o=JSON.parse(localStorage.getItem("epp_mvp_unsaved_path")),s={name:t,pathways:o};a.ajax({type:"POST",url:e,data:JSON.stringify(s),dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(a){if(0<a){localStorage.setItem("epp_mvp_save_user_path",0),localStorage.setItem("epp_mvp_unsaved_path_name",""),localStorage.setItem("epp_mvp_unsaved_path","");var e=localStorage.getItem("epp_mvp_redirect_url");localStorage.removeItem("epp_mvp_redirect_url"),window.location.replace(e)}},error:function(a){console.log(a)}})}if(null!==localStorage.getItem("epp_mvp_bookmark_job_id")){var p=localStorage.getItem("epp_mvp_bookmark_job_id"),n=localStorage.getItem("epp_mvp_bookmark_job_title"),s={job_id:p,job_title:n,action:"add"};a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/bookmark",data:s,dataType:"json",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(a){console.log(a),localStorage.removeItem("epp_mvp_bookmark_job_id"),localStorage.removeItem("epp_mvp_bookmark_job_title");var e=localStorage.getItem("epp_mvp_redirect_url");localStorage.removeItem("epp_mvp_redirect_url"),window.location.replace(e)},error:function(a){console.log(a)}})}}})})(jQuery),jQuery.fn.simplePaginate=function(a,e){(a===void 0||isNaN(a))&&(a=4);var t,o=this;t=e?e:"pagination-elements";for(var s=0;s<o.length;s+=a)o.slice(s,s+a).wrapAll("<div class=\""+t+"\"></div>");var p=1,n="";$("."+t).each(function(){$(this).addClass("page-"+p),n=1==p?"active":"",$("."+t).not(":first").hide(),p++})},jQuery.fn.outerHTML=function(a){return a?this.before(a).remove():jQuery("<p>").append(this.eq(0).clone()).html()};function goToByScroll(a,e,t){("undefined"==typeof t||null===t)&&(t=0);var o=$(a).offset().top;o-=t,$("html,body").animate({scrollTop:o},e)}function equalHeights(a){var e,t=[];$(a).css("height",""),$(a).each(function(){var a=$(this).outerHeight();t.push(a),e=Math.max.apply(Math,t)}),$(a).css("height",e+"px")}function kFormatter(a){return 999<a?Math.round(a/1e3)+"K":a}function numberWithCommas(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function automationPercent(a){var e=parseFloat(a);e=Math.round(100*e);var t="text-success";20<e&&50>e?t="text-warning":50<=e&&(t="text-danger");var o={automation_percent:e,automation_colour:t};return o}function percentageDistance(a){return Math.round(100*(1-a))}function validateEmail(a){var e=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i,t=document.getElementById(a).value;return!!e.test(t)}var occupationsObj,getJSON=function(a,e){var t=new XMLHttpRequest;t.open("GET",a,!0),t.responseType="json",t.onload=function(){var a=t.status;200===a?e(null,t.response):e(a,t.response)},t.send()},occupationTitles=[];getJSON(EPP_DATA.site_url+"/epp-occupations.json",function(a,e){if(null!==a)console.log("Something went wrong: "+a);else{occupationsObj=e.rows,console.log("occupations loaded!");for(var t=0;t<occupationsObj.length;t++)occupationTitles.push({label:occupationsObj[t].title,value:occupationsObj[t].soc_code});console.log("occupation titles loaded!"),!document.hasFocus()}});function closePopupsEtAl(){$(".blocking, .popup, .form--search-occupations").removeClass("visible"),$(".search-occupations-btn").removeClass("active"),$(".form--search-occupations")[0].reset(),$("body").removeClass("search-occupations-active"),$(".menu--secondary").css("border",""),setTimeout(function(){$(".blocking, .popup, .form--search-occupations").removeClass("active"),$("#signup-form input, #login-form input").val(""),$("#signup-form input, #login-form input").blur(),$("#signup-form")[0].reset(),$("#login-form")[0].reset()},400)}function closeLoginSignup(){$("body").removeClass("popup-active"),$(".popup-overlay").fadeOut(500),setTimeout(function(){$("#signup-form input, #login-form input").val(""),$("#signup-form input, #login-form input").blur(),$("#signup-form")[0].reset(),$("#login-form")[0].reset()},500)}function launchLoginPopup(){$(".popup-overlay--signup").fadeOut(500),$(".popup-overlay--login").fadeIn(500);var a=$(window).width();setTimeout(function(){768>a?($("#page-wrapper").hide(),$(".mobile-menu-btn span").removeClass("active"),$(".mobile-menu-btn, body, #page-wrapper, .mobile-menu-bar, .mobile-nav").removeClass("menu-open"),$("#page-wrapper").removeClass("opaque")):$("#page-wrapper").show(),$("body").addClass("popup-active"),$("#login-form").focus()},500)}function launchSignupPopup(){$(".popup-overlay--login").fadeOut(500),$(".popup-overlay--signup").fadeIn(500);var a=$(window).width();setTimeout(function(){768>a?($("#page-wrapper").hide(),$(".mobile-menu-btn span").removeClass("active"),$(".mobile-menu-btn, body, #page-wrapper, .mobile-menu-bar, .mobile-nav").removeClass("menu-open"),$("#page-wrapper").removeClass("opaque")):$("#page-wrapper").show(),$("body").addClass("popup-active")},500)}function truncateTitle(a,e){var t;return a.length>e?(t=a.substring(0,e),t+="...","<span data-toggle=\"tooltip\" data-placement=\"top\" title=\""+a+"\">"+t+"</span>"):a}function createOccupationObj(a){var e,t,o,s,p,n=null;return a.hasClass("pathway__occupation--start")?(e=a.find(".pathway__start-path-btn").attr("data-soc-code"),t=a.find(".input__start-new-path").val(),t=t.trim()):(e=a.find(".pathway__occupation-btn").attr("data-soc-code"),t=a.find(".pathway__occupation-title").attr("data-full-title"),t=t.trim()),o=a.find(".pathway__occupation-automation .pathway__value").text(),s=a.find(".pathway__occupation-salary .pathway__value").text(),s=s.replace("$",""),s=s.replace(/,/g,""),a.find(".pathway__occupation-skill-overlap")&&(n=a.find(".pathway__occupation-skill-overlap").text()),p={soc_code:e,title:t,automation:parseFloat(o),salary:parseFloat(s),skill_overlap:n},p}function getParameterByName(a,e){e||(e=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),o=t.exec(e);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}function calculateMedianSalary(a,e){var t;if(a&&e){var a=parseFloat(a),e=parseFloat(e),o=Math.round((a+e)/2);t=numberWithCommas(o)}else if(a&&!e){var a=parseFloat(a);t=numberWithCommas(a)}else if(!a&&e){var e=parseFloat(e);t=numberWithCommas(e)}else t="--";return t}function isMobile(){var a;return 991<jQuery(window).width()&&(a=!1),992>jQuery(window).width()&&(a=!0),a}function setCurrentPath(){var a=localStorage.getItem("epp_mvp_open_path");a=JSON.parse(a);var e={},t=2,o=createOccupationObj(jQuery(".pathway__occupation--start"));e.path_1=o;var s=parseFloat(a.total_occs)+1,p=jQuery(".pathway__groups .pathway__occupation.expanded, .pathway__groups .pathway__occupation.selected");p.each(function(){if(t<s){var a=createOccupationObj(jQuery(this));e["path_".concat(t)]=a,t++}}),localStorage.setItem("epp_mvp_current_path",JSON.stringify(e))}function copyDesktopOccupations(){jQuery(".mobile-pathway__groups").empty(),jQuery(".pathway__group").not(".pathway__group--start").each(function(){jQuery(".mobile-pathway__groups").append(jQuery(this).outerHTML())}),setCurrentPathView()}function copyMobileOccupations(){jQuery(".pathway__groups .pathway__group").not(".pathway__group--start").remove(),jQuery(".pathway__groups").append(jQuery(".mobile-pathway__groups").html()),setCurrentPathView()}function setCurrentPathView(){var a=localStorage.getItem("epp_mvp_current_path"),a=JSON.parse(a),e=Object.keys(a).length,t=parseFloat(e)+1,o=1;if(""!=a.path_1.soc_code){$(".current-path-holder .col").removeClass("has-1-occs has-2-occs has-3-occs has-4-occs").addClass("has-"+e+"-occs").empty(),$(".current-path-holder .col-12").remove();for(var s=1;s<t;s++){var p,n=a["path_".concat(s)],l=truncateTitle(n.title,25);p=null===n.salary?"--":numberWithCommas(n.salary),$(".current-path-holder .col").append("<div class=\"pathway__occupation pathway__occupation--"+o+" collapsed\" data-soc-code=\""+n.soc_code+"\"><em class=\"pathway__occupation-skill-overlap\">"+n.skill_overlap+"</em><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+n.soc_code+"\" target=\"_blank\" class=\"pathway__occupation-title\" data-full-title=\""+n.title+"\">"+l+"</a><div class=\"pathway__occupation-automation\"><span class=\"pathway__label\">Risk of automation</span><span class=\"pathway__value\">"+n.automation+"%</span></div><!-- End .pathway__automation-risk --><div class=\"pathway__occupation-salary\"><span class=\"pathway__label\">Median salary</span><span class=\"pathway__value\">$"+p+"</span></div><!-- End .pathway__salary --><div><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+n.soc_code+"#occ-jobs\" class=\"jobs-link\">Jobs &amp; Training</a></div></div><span class=\"checked-circle checked-circle--"+o+"\"></span>"),o++}$("[data-toggle=\"tooltip\"]").tooltip()}}function updateActionsDiv(){var a;isMobile()?(1==jQuery(".mobile-pathway__groups > .pathway__group:visible").length&&(a="col-md-6"),2==jQuery(".mobile-pathway__groups > .pathway__group:visible").length&&(a="col-md-9"),3==jQuery(".mobile-pathway__groups > .pathway__group:visible").length&&(a="col-md-12")):(1==jQuery(".pathway__groups > .pathway__group:visible").length&&(a="col-md-3"),2==jQuery(".pathway__groups > .pathway__group:visible").length&&(a="col-md-6"),3==jQuery(".pathway__groups > .pathway__group:visible").length&&(a="col-md-9"),4==jQuery(".pathway__groups > .pathway__group:visible").length&&(a="col-md-12")),jQuery(".pathways__actions").removeClass("col-md-3 col-md-6 col-md-9 col-md-12").addClass(a)}function createPathwayID(a,e){var t,o=e;return o=o.replace(/\./g,"-"),-1!==a.indexOf(".pathway__group--2")&&(t="group-2-"+o),-1!==a.indexOf(".pathway__group--3")&&(t="group-3-"+o),-1!==a.indexOf(".pathway__group--4")&&(t="group-4-"+o),t}window.onscroll=function(){scrollProgress()};function scrollProgress(){var a=document.body.scrollTop||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-document.documentElement.clientHeight;document.querySelector(".page-scroll-indicator").style.transform="translateX("+100*(a/e)+"%)"}(function(a){"use strict";a(function(){a(document).on("click",".occupation__bookmark-btn",function(){var e=a(this);if(e.hasClass("bookmark-not-logged-in")){localStorage.setItem("epp_mvp_bookmark_job_id",e.attr("data-job-id")),localStorage.setItem("epp_mvp_bookmark_job_title",e.attr("data-job-title"));var t=e.attr("href");localStorage.setItem("epp_mvp_redirect_url",t),launchLoginPopup()}else{var o="delete";e.hasClass("not-bookmarked")?o="add":e.hasClass("bookmarked")&&(o="delete");var s=e.attr("data-job-id"),p=e.attr("data-job-title"),n={job_id:s,job_title:p,action:o};a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/bookmark",data:n,dataType:"json",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(a){console.log(a),1==a&&(e.addClass("bookmarked").removeClass("not-bookmarked"),e.text("Bookmarked"),e.attr("title","Remove from Bookmarks")),3==a&&(e.addClass("not-bookmarked").removeClass("bookmarked"),e.text("Bookmark Occupation"),e.attr("title","Add to Bookmarks"))},error:function(a){console.log(a)}})}return!1}),a(document).on("click",".bookmarked-occupation__delete-btn",function(){var e=a(this).attr("data-job-id"),t=a(this).attr("data-job-title");return a(".button--delete-bookmark").attr("data-job-id",e),a(".button--delete-bookmark").attr("data-job-title",t),a(this).closest(".bookmarked-occupation").addClass("to-be-removed"),a("#delete-bookmark-modal").modal("show"),!1}),a("#delete-bookmark-modal").on("hidden.bs.modal",function(){a(".bookmarked-occupation").removeClass("to-be-removed"),a(".button--delete-bookmark").attr("data-job-id",""),a(".button--delete-bookmark").attr("data-job-title","")}),a(document).on("click",".button--delete-bookmark",function(){var e=a(this),t=e.attr("data-job-id"),o=e.attr("data-job-title");return a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/bookmark",data:{job_id:t,job_title:o,action:"delete"},dataType:"json",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(e){console.log(e),3==e&&(a("#delete-bookmark-modal").modal("hide"),a(".bookmarked-occupation.to-be-removed").remove())},error:function(a){console.log(a)}}),!1})})})(jQuery),function(a){"use strict";a(function(){a(document).on("click",".delete-account__btn",function(){return 0<a("input[name=\"reason-for-leaving\"]:checked").length?(a(".reason-for-leaving-error-msg").addClass("d-none"),a("#delete-account-modal").modal("show")):a(".reason-for-leaving-error-msg").removeClass("d-none"),!1}),a(document).on("click",".button--confirm-delete",function(){var e=a("input[name=\"reason-for-leaving\"]:checked").val();"Other"==e&&(e=a("#other-reason-input").val());var t={reason:e};return a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/account/delete",data:t,dataType:"json",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(e){console.log(e),1==e?window.location.href=EPP_DATA.site_url+"?action=account_deleted":(a(".deletion-warning").removeClass("d-none"),a(".deletion-warning strong").text("Error!"),a(".deletion-warning span").text("An error occured, please try again."))},error:function(a){console.log(a)}}),!1})})}(jQuery),function(a){"use strict";a(function(){a(document).on("click",".faq__nav-link",function(){var e=a(this).attr("href");return goToByScroll(e,500,125),!1}),a(document).on("click",".faq__collapse-btn",function(){return a(this).toggleClass("active"),a(this).next().slideToggle(500),!1})})}(jQuery),function(a){"use strict";a(function(){}),a(window).on("load",function(){setTimeout(function(){if(a("body").hasClass("home")){var e=window.location.search;if(-1!==e.indexOf("?section=")){var t=e.replace("?section=","");goToByScroll("#"+t,500,91)}}a(document).on("click",".menu__item--articles",function(){if(a("body").hasClass("home"))return goToByScroll("#home-section--future-of-work",500,91),!1}),a(document).on("click",".menu__item--about",function(){if(a("body").hasClass("home"))return goToByScroll("#home-about-section",500,225),!1})},1e3)})}(jQuery),function(a){"use strict";var e=Math.ceil;a(function(){if(0<a(".job__single--recent").length){var t=e(a(".job__single--recent").length/5);a(".job__single--recent").simplePaginate(5,"pagination-elements__jobs--recent"),a(".pagination__jobs--recent").data("twbs-pagination")&&a(".pagination__jobs--recent").twbsPagination("destroy"),a(".job__holder--recent").twbsPagination({totalPages:t,visiblePages:4,paginationClass:"pagination__jobs pagination__jobs--recent",onPageClick:function(e,t){a(".pagination-elements__jobs--recent").not(".pagination-elements__jobs--recent.page-"+t).hide(),a(".pagination-elements__jobs--recent.page-"+t).show(),a(".job__total-jobs--recent em").text(t)}}),a(".job__holder--recent").append("<span class=\"search-results__info\">Results page:</span>"),a(".job__single--recent-mobile").simplePaginate(5,"pagination-elements__jobs--recent-mobile"),a(".pagination-elements__jobs--recent-mobile").css("height","auto"),a(".job__holder--recent-mobile .button").attr("data-total-pages",t)}if(0<a(".job__single--all").length){var t=e(a(".job__single--all").length/5);a(".job__single--all").simplePaginate(5,"pagination-elements__jobs--all"),a(".pagination__jobs--all").data("twbs-pagination")&&a(".pagination__jobs--all").twbsPagination("destroy"),a(".job__holder--all").twbsPagination({totalPages:t,visiblePages:4,paginationClass:"pagination__jobs pagination__jobs--all",onPageClick:function(e,t){a(".pagination-elements__jobs--all").not(".pagination-elements__jobs--all.page-"+t).hide(),a(".pagination-elements__jobs--all.page-"+t).show(),a(".job__total-jobs--all em").text(t)}}),a(".job__holder--all").append("<span class=\"search-results__info\">Results page:</span>"),a(".job__single--all-mobile").simplePaginate(5,"pagination-elements__jobs--all-mobile"),a(".pagination-elements__jobs--all-mobile").css("height","auto"),a(".job__holder--all-mobile .button").attr("data-total-pages",t)}a(document).on("click",".job__filter-btn",function(){return a(this).hasClass("job__filter-btn--all")?(a(".jobs-wrap--all").show(),a(".jobs-wrap--recent").hide(),a(".sort-btn--all").removeClass("button--outlined").addClass("button"),a(".sort-btn--recent").removeClass("button").addClass("button--outlined"),equalHeights(".pagination-elements__jobs--all")):(a(".jobs-wrap--recent").show(),a(".jobs-wrap--all").hide(),a(".sort-btn--recent").removeClass("button--outlined").addClass("button"),a(".sort-btn--all").removeClass("button").addClass("button--outlined"),equalHeights(".pagination-elements__jobs--recent")),!1}),a(document).on("click",".sort-btn",function(){return a(".sort-btn").toggleClass("button--outlined button"),a(this).hasClass("sort-btn--all")?(a(".jobs-wrap--all").show(),a(".jobs-wrap--recent").hide(),a(".sort-btn--all").removeClass("button--outlined").addClass("button"),a(".sort-btn--recent").removeClass("button").addClass("button--outlined"),equalHeights(".pagination-elements__jobs--all")):(a(".jobs-wrap--recent").show(),a(".jobs-wrap--all").hide(),a(".sort-btn--recent").removeClass("button--outlined").addClass("button"),a(".sort-btn--all").removeClass("button").addClass("button--outlined"),equalHeights(".pagination-elements__jobs--recent")),!1}),a(document).on("click",".button--more-jobs",function(){var e,t=a(this).attr("data-jobs-type"),o=a(this).attr("data-total-pages"),s=a(this).attr("data-next-page");return s<o?(e=a(this).siblings(".pagination-elements__jobs--"+t+"-mobile.page-"+s).html(),a(".pagination-elements__jobs--"+t+"-mobile.page-1").append(e),s++,a(this).attr("data-next-page",s),s>=o&&a(this).hide()):a(this).hide(),!1})})}(jQuery),function(a){"use strict";a(function(){a(document).on("click",".login-btn",function(){return launchLoginPopup(),!1}),a("#login-form").on("submit",function(e){e.preventDefault(),a(".popup__form--login .form-feedback").empty().addClass("d-none").removeClass("error");var t=a("#login-email").val(),o=a("#login-password").val(),s=a("#redirect-after-login").val();a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/login",data:{email:t,password:o,redirect:s},dataType:"json",beforeSend:function(a){a.setRequestHeader("X-EPP-WP-Key",EPP_DATA.epp_key)},success:function(e){1==e.result_code&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({loggedInUser:e.user_id,event:"userLogin"}),setTimeout(function(){location.reload()},100)),2==e.result_code&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({loggedInUser:e.user_id,event:"userLogin"}),setTimeout(function(){window.location.href=e.redirect_url},100)),0==e.result_code&&a(".popup__form--login .form-feedback").removeClass("d-none success").addClass("error").append(e.message)},error:function(a){console.log(a)}})}),a(window).keyup(function(e){a(".popup--login").hasClass("active")&&(27===e.keyCode||27===e.which)&&closePopupsEtAl()})})}(jQuery),function(a){"use strict";a(function(){a(".search-results").hide(),a(".form--search-occupations").on("submit",function(e){e.preventDefault();var t=a(window).width(),o=a("#search-occ-input").val(),s=o.toLowerCase();""==o&&(o="''"),a(".form--search-occupations")[0].reset(),a("#search-occ-input").blur(),a.getJSON(EPP_DATA.site_url+"/epp-occupations.json",function(e){for(var p=e.rows,n="",l=0,c="search results",r=0;r<p.length;r++){var _=p[r].title.toLowerCase(),d=_.replace(s,"<em>"+s+"</em>");0<=_.indexOf(s)&&(n+="<p class=\"search-results__item\"><a class=\"search-results__link\" href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+p[r].soc_code+"\" data-id=\""+p[r].soc_code+"\">"+d+"</a></p>",l++)}0==l&&(n+="<p class=\"search-results__item\">No results found.</p>",a(".pagination, .search-results__info").hide()),1==l&&(c="search result"),a(".search-results__query span").text(o),a(".search-results__query em").text(l+" "+c),a(".search-results__data").html(n),a(".search-results").fadeIn(400),0<l&&(a(".pagination, .search-results__info").show(),a(".search-results__item").simplePaginate(10),a(".pagination").data("twbs-pagination")&&a(".pagination").twbsPagination("destroy"),a(".pagination").twbsPagination({totalPages:Math.ceil(a(".search-results__item").length/10),visiblePages:4,onPageClick:function(e,t){a(".pagination-elements").not(".pagination-elements.page-"+t).hide(),a(".pagination-elements.page-"+t).show()}})),a("body").addClass("search-results-visible").css({height:"100vh","overflow-y":"hidden"}),768>t&&a("html,body").animate({scrollTop:0},"slow"),closePopupsEtAl()})}),a(document).on("click",".search-results__close-btn",function(){return a(".search-results").fadeOut(400),a("body").removeClass("search-results-visible").css({height:"","overflow-y":""}),!1}),a("#search-occ-input").autocomplete({source:function(e,t){var o=a.ui.autocomplete.escapeRegex(e.term),s=new RegExp("^"+o,"i"),p=a.grep(occupationTitles,function(a){return s.test(a.label||a.value||a)}),n=new RegExp(o,"i"),l=a.grep(occupationTitles,function(e){return 0>a.inArray(e,p)&&n.test(e.label||e.value||e)}),c=p.concat(l);t(c.slice(0,5))},appendTo:"#search-occ-autocomplete-container",change:function(a,e){null!=e.item&&(location.href=EPP_DATA.site_url+"/occupation/?soc_code="+e.item.value)},select:function(e,t){e.preventDefault(),a("#search-occ-input").val(t.item.label),null!=t.item&&(location.href=EPP_DATA.site_url+"/occupation/?soc_code="+t.item.value)},focus:function(e,t){e.preventDefault(),a("#search-occ-input").val(t.item.label)},classes:{"ui-autocomplete":"search-occ-autocomplete"}}),a("#search-occ-input").keyup(function(a){(27===a.keyCode||27===a.which)&&closePopupsEtAl()})})}(jQuery),function(a){"use strict";a(function(){a(".form--password-reset").on("submit",function(e){e.preventDefault();var t=a("#new-password").val(),o=a("#new-password-confirm").val(),s=a("#user-id").val(),p=a("#user-login").val(),n=a("#activation-key").val();if(o!=t)a(".form--password-reset .alert").addClass("alert-danger").removeClass("alert-success d-none"),a(".form--password-reset .alert span").empty().text("Your passwords do not match");else{a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/account/password-reset",data:{new_password:t,user_id:s,user_login:p,activation_key:n},dataType:"json",beforeSend:function(a){a.setRequestHeader("X-EPP-WP-Key",EPP_DATA.epp_key)},success:function(e){0<e&&(a(".form-label-group").remove(),a(".form--password-reset .alert").addClass("alert-success").removeClass("alert-danger d-none"),a(".form--password-reset .alert span").empty().html("Your password has been successfully reset. <a href=\""+EPP_DATA.site_url+"\" class=\"alert-link launch-login\">Login</a>."))},error:function(a){console.log(a)}})}})})}(jQuery),function(a){"use strict";function e(e,t,o,s){var p=".pathway__groups .pathway__group--"+o;a.ajax({type:"GET",url:EPP_DATA.api_url+"/occupation/distance/"+e+"?rows_limit=5&soc_exclude="+s,beforeSend:function(a){a.setRequestHeader("x-api-key",EPP_DATA.api_key)},success:function(e){var o=e.overlap.data.rows,s=1;a(p+" .pathway__occupation").remove();for(var n=0;n<o.length;n++){var l,c=truncateTitle(o[n].title,25),r=automationPercent(o[n].risk_end);l=null==o[n].salarymax_end?"--":numberWithCommas(o[n].salarymax_end);var _=createPathwayID(p,o[n].soc_code);a(p).append("<div class=\"pathway__occupation pathway__occupation--"+s+"\" data-soc-code=\""+o[n].soc_code+"\" data-id=\"occ-"+_+"\"><em class=\"pathway__occupation-skill-overlap\">"+percentageDistance(o[n].dist_all)+"% skill overlap</em><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+o[n].soc_code+"\" target=\"_blank\" class=\"pathway__occupation-title\" data-full-title=\""+o[n].title+"\">"+c+"</a><div class=\"pathway__occupation-automation\"><span class=\"pathway__label\">Risk of automation</span><span class=\"pathway__value\">"+r.automation_percent+"%</span></div><!-- End .pathway__automation-risk --><div class=\"pathway__occupation-salary\"><span class=\"pathway__label\">Median salary</span><span class=\"pathway__value\">$"+l+"</span></div><!-- End .pathway__salary --><div><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+o[n].soc_code+"\" class=\"jobs-link\" target=\"_blank\">Jobs &amp; Training</a><a href=\"#\" class=\"pathway__occupation-btn pathway__occupation-add-btn\" data-occ-title=\""+o[n].title+"\" data-soc-code=\""+o[n].soc_code+"\" data-id=\"btn-"+_+"\">Add to path</a></div><span class=\"pathway__plus-btn\"></span><span class=\"pathway__divider\"></span><span class=\"pathway__collapsed-occupations\"></span></div>"),s++}var d=a(t.active_occ_selector);d.removeClass("active").addClass("selected"),d.find(".pathway__occupation-btn").removeClass("pathway__occupation-add-btn").addClass("pathway__occupation-matches-btn").text("Show Matches");var u=localStorage.getItem("epp_mvp_open_path");u=JSON.parse(u),setTimeout(function(){3==u.total_occs&&4==u.totalOccs&&a(u.occ_3.active_occ_selector).siblings(".pathway__occupation").addClass("shrink"),4==u.total_occs&&(a(u.occ_3.active_occ_selector).removeClass("selected").addClass("expanded"),a(u.occ_3.active_occ_selector).siblings(".pathway__occupation").addClass("shrink"))},100),setTimeout(function(){var a=window.location.search;-1!==a.indexOf("action=edit")&&setCurrentPath(),copyDesktopOccupations()},200),a("[data-toggle=\"tooltip\"]").tooltip()},error:function(a){console.log(a)}})}a(function(){if(a(document).on("click",".saved-pathway__open-btn",function(){var e={},t=1,o=a(this).attr("data-start-occ"),s=a(this).attr("data-total-occ"),p="col-md-"+(3*s).toString(),n=a(this).siblings(".input--edit-path-name").val(),l=a(this).siblings(".input--edit-path-name").attr("data-row-index");return e.total_occs=s,e.actions_div_class=p,e.pathway_name=n,e.row_index=l,a(this).closest(".saved-pathway__actions").next(".saved-pathway").find(".saved-pathway__occupation").each(function(){var o=a(this).attr("data-soc-code");e["occ_"+t]={soc_code:o,active_occ_selector:".pathway__group--"+t+" .pathway__occupation[data-soc-code=\""+o+"\"]"},t++}),localStorage.setItem("epp_mvp_open_path",JSON.stringify(e)),window.location.href=EPP_DATA.site_url+"/pathways/?soc_code="+o+"&action=edit",!1}),a("body").hasClass("page-template-page-pathways")){var t=window.location.search;if(-1!==t.indexOf("action=edit")){var o=localStorage.getItem("epp_mvp_open_path");if(o=JSON.parse(o),a(".pathways__name-current-path span").text(o.pathway_name),a(".input--save-path-name").val(o.pathway_name).attr("data-initial-value",o.pathway_name).attr("data-row-index",o.row_index),a(".pathways__actions").removeClass("col-md-6 col-md-9 col-md-12").addClass(o.actions_div_class),2==o.total_occs&&a(".pathway__progress li.step2").addClass("selected active"),3==o.total_occs&&a(".pathway__progress li.step2, .pathway__progress li.step3").addClass("selected active"),4==o.total_occs&&a(".pathway__progress li.step2, .pathway__progress li.step3, .pathway__progress li.step4").addClass("selected active"),a(o.occ_2.active_occ_selector+" .pathway__occupation-btn").removeClass("pathway__occupation-add-btn").addClass("pathway__occupation-matches-btn").text("Show Matches"),a(o.occ_2.active_occ_selector).siblings(".pathway__occupation").addClass("shrink"),a(".pathway__group--2").find(".pathway__collapse-btn").show(),2==o.total_occs&&(a(".pathway__group--2").addClass("is-last"),a(o.occ_2.active_occ_selector).removeClass("active").addClass("selected")),3==o.total_occs){a(".pathway__group--3").addClass("is-last"),a(o.occ_2.active_occ_selector).removeClass("selected").addClass("expanded");var s=getParameterByName("soc_code"),p="".concat(s,",").concat(o.occ_2.soc_code);a(".pathway__group--3").removeClass("d-none"),a(".pathway__group--2").addClass("has-active"),a(".pathway__group--3 .pathway__collapse-btn").show(),e(o.occ_2.soc_code,o.occ_3,o.total_occs,p)}if(4==o.total_occs){a(o.occ_2.active_occ_selector).removeClass("selected").addClass("expanded");var s,p;a(".pathway__group--3, .pathway__group--4").removeClass("d-none"),a(".pathway__group--2, .pathway__group--3").addClass("has-active"),a(".pathway__group--3 .pathway__collapse-btn, .pathway__group--4 .pathway__collapse-btn").show(),s=getParameterByName("soc_code"),p="".concat(s,",").concat(o.occ_2.soc_code),e(o.occ_2.soc_code,o.occ_3,3,p),p="".concat(s,",").concat(o.occ_2.soc_code,",").concat(o.occ_3.soc_code),e(o.occ_3.soc_code,o.occ_4,o.total_occs,p)}setCurrentPath()}}a(".input--save-path-name").blur(function(){var e,t,o,s,p,n,l=a(this),c=l.attr("data-initial-value"),i=l.val(),r=l.attr("data-row-index");if("name this path"!=c)e=EPP_DATA.site_url+"/wp-json/api/v1/pathways/edit",t={name:i,row_index:r},o=t,p="";else if(i&&""!=c)e=EPP_DATA.site_url+"/wp-json/api/v1/pathways/save",s=localStorage.getItem("epp_mvp_current_path"),s=JSON.parse(s),t={name:i,row_index:r,pathways:s},o=JSON.stringify(t),p=1,a(".save-pathway-popup").html("Path Saved"),a(".save-pathway-popup").addClass("disabled"),a(".pathway__saved-pathway-msg.alert-success").removeClass("d-none");else return!1;c==i?(l.siblings("span").show(),l.hide()):(n=p?"application/json; charset=utf-8":void 0,a.ajax({type:"POST",url:e,data:o,dataType:"json",contentType:n,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(a){console.log(a),0!=i&&(l.siblings("span").text(i),l.siblings("span").show(),l.hide(),l.attr("data-initial-value",i))},error:function(a){console.log(a)}}))})})}(jQuery),function(a){"use strict";function e(a,e){"collapse"==e?(a.closest(".pathway__group").find(".pathway__occupation--2").css({top:"-160px",opacity:"0"}),a.closest(".pathway__group").find(".pathway__occupation--3").css({top:"-320px",opacity:"0"}),a.closest(".pathway__group").find(".pathway__occupation--4").css({top:"-480px",opacity:"0"}),a.closest(".pathway__group").find(".pathway__occupation--5").css({top:"-640px",opacity:"0"}),a.closest(".pathway__occupation").css({"z-index":"10",opacity:"1"}),a.closest(".pathway__occupation").removeClass("expanded").addClass("active"),setTimeout(function(){a.closest(".pathway__group").find(".pathway__collapse-btn").hide(),a.closest(".pathway__group").find(".pathway__expand-btn").show(),a.closest(".pathway__occupation").siblings(".pathway__occupation").addClass("shrink")},300)):"expand"==e&&(a.closest(".pathway__group").find(".pathway__occupation").css({top:"0",opacity:"1"}),a.closest(".pathway__group").hasClass("pathway__group--4")?a.closest(".pathway__group").find(".pathway__occupation.active").removeClass("active").addClass("selected"):a.closest(".pathway__group").find(".pathway__occupation.active").removeClass("active").addClass("expanded"),setTimeout(function(){a.closest(".pathway__group").find(".pathway__expand-btn").hide(),a.closest(".pathway__group").find(".pathway__collapse-btn").show()},300))}function t(t){var o=t.closest(".pathway__group").attr("data-id");a(".".concat(o," .pathway__occupation")).removeClass("selected expanded");var s=a(".".concat(o)).nextAll(".pathway__group");0<s.length&&s.each(function(){var e=a(this).attr("data-id");a(".".concat(e," .pathway__occupation")).remove(),a(".".concat(e," .pathway__expand-btn, .").concat(e," .pathway__collapse-btn")).hide(),a(this).addClass("d-none")}),t.closest(".pathway__occupation").addClass("selected"),t.closest(".pathway__occupation").siblings(".pathway__occupation").find(".pathway__occupation-btn").removeClass("pathway__occupation-matches-btn").addClass("pathway__occupation-add-btn").text("Add to Path"),t.removeClass("pathway__occupation-add-btn").addClass("pathway__occupation-matches-btn").text("Show Matches"),"pathway__group--4"==o&&e(t,"collapse")}function o(e){var t=e.closest(".pathway__group").attr("data-id");a(".mobile-pathway__groups .".concat(t," .pathway__occupation")).removeClass("selected expanded");var o=a(".mobile-pathway__groups .".concat(t)).nextAll(".pathway__group");0<o.length&&o.each(function(){var e=a(this).attr("data-id");a(".mobile-pathway__groups .".concat(e)).addClass("d-none").find(".pathway__occupation").remove()}),e.closest(".pathway__occupation").addClass("selected"),e.closest(".pathway__occupation").siblings(".pathway__occupation").find(".pathway__occupation-btn").removeClass("pathway__occupation-matches-btn").addClass("pathway__occupation-add-btn").text("Add to Path"),e.removeClass("pathway__occupation-add-btn").addClass("pathway__occupation-matches-btn").text("Show Matches")}function s(e){var t,o=a(".pathway__start-path-btn").attr("data-soc-code"),s=e.attr("data-soc-code"),p=e.closest(".pathway__group").attr("data-id"),n=a(".".concat(p)).next(".pathway__group"),c=n.attr("data-id"),i=".".concat(c);if(".pathway__group--3"==i)t=[o,s],localStorage.setItem("epp_mvp_excluded_soc",t);else if(".pathway__group--4"==i){var r=a(".pathway__group--2 .pathway__occupation.active, .pathway__group--2 .pathway__occupation.expanded"),_=r.attr("data-soc-code");t=[o,_,s],localStorage.setItem("epp_mvp_excluded_soc",t)}a(".pathway__group").removeClass("is-last"),e.closest(".pathway__occupation").removeClass("selected").addClass("expanded"),a(i).removeClass("d-none"),a(".".concat(p)).addClass("has-active"),setTimeout(function(){var t=localStorage.getItem("epp_mvp_excluded_soc");a(i).find(".loading").css("opacity","1"),l(s,t,i,e)},100)}function p(e){var t,o=a(".pathway__start-path-btn").attr("data-soc-code"),s=e.attr("data-soc-code"),p=e.closest(".pathway__group").attr("data-id"),n=a(".".concat(p)).next(".pathway__group"),l=n.attr("data-id"),i=".mobile-pathway__groups .".concat(l);if(".mobile-pathway__groups .pathway__group--3"==i)t=[o,s],localStorage.setItem("epp_mvp_excluded_soc",t);else if(".mobile-pathway__groups .pathway__group--4"==i){var r=a(".mobile-pathway__groups .pathway__group--2 .pathway__occupation.active, .mobile-pathway__groups .pathway__group--2 .pathway__occupation.expanded"),_=r.attr("data-soc-code");t=[o,_,s],localStorage.setItem("epp_mvp_excluded_soc",t),a(".pathway__group--4").removeClass("d-none")}a(".pathway__group").removeClass("is-last"),e.closest(".pathway__occupation").removeClass("selected").addClass("expanded"),a(i).css({opacity:"0",transform:"translateY(-100px)"}),a(".mobile-pathway__groups .".concat(p)).addClass("has-active"),setTimeout(function(){var t=localStorage.getItem("epp_mvp_excluded_soc");a(".loading--mobile").show(),c(s,t,i,e)},100)}function n(e){var t=createOccupationObj(a(".pathway__occupation--start"));if(null===localStorage.getItem("epp_mvp_current_path")){var o=createOccupationObj(a(".pathway__occupation--start")),s={path_1:o};localStorage.setItem("epp_mvp_current_path",JSON.stringify(s))}else{var s=localStorage.getItem("epp_mvp_current_path");s=JSON.parse(s);var o=createOccupationObj(e.closest(".pathway__occupation"))}var p;e.closest(".pathway__group").hasClass("pathway__group--2")?(s.path_1=t,s.path_2=o,delete s.path_3,delete s.path_4,a(".pathway__progress .step3, .pathway__progress .step4").removeClass("selected active"),a(".pathway__progress .step2").addClass("active"),p="".concat(s.path_1.title," [path 1] --> ").concat(s.path_2.title," [path 2]")):e.closest(".pathway__group").hasClass("pathway__group--3")?(s.path_3=o,delete s.path_4,a(".pathway__progress .step4").removeClass("selected active"),a(".pathway__progress .step3").addClass("active"),p="".concat(s.path_1.title," [path 1] --> ").concat(s.path_2.title," [path 2] --> ").concat(s.path_3.title," [path 3]")):e.closest(".pathway__group").hasClass("pathway__group--4")&&(s.path_4=o,a(".pathway__progress .step4").addClass("active"),p="".concat(s.path_1.title," [path 1] --> ").concat(s.path_2.title," [path 2] --> ").concat(s.path_3.title," [path 3] --> ").concat(s.path_4.title," [path 4]")),localStorage.setItem("epp_mvp_current_path",JSON.stringify(s)),localStorage.setItem("epp_mvp_saved_path",0),a(".pathway__saved-pathway-msg").addClass("d-none"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({pathwayBuildSequence:p,event:"sequenceLogged"})}function l(t,o,s,p){a.ajax({type:"GET",url:EPP_DATA.api_url+"/occupation/distance/"+t+"?rows_limit=5&soc_exclude="+o,beforeSend:function(a){a.setRequestHeader("x-api-key",EPP_DATA.api_key)},success:function(t){var o=t.overlap.data.rows;if(0<o.length){var n=1;a("".concat(s," .pathway__occupation, ").concat(s," .no-pathway-results")).remove();for(var l=0;l<o.length;l++){var c,r=truncateTitle(o[l].title,25),_=automationPercent(o[l].risk_end);c=null==o[l].salarymax_end?"--":numberWithCommas(o[l].salarymax_end);var d=createPathwayID(s,o[l].soc_code);a(s).find(".loading").css("opacity","0"),a(s).append("<div class=\"pathway__occupation pathway__occupation--"+n+"\" data-soc-code=\""+o[l].soc_code+"\" style=\"left: -50px; opacity: 0;\" data-id=\"occ-"+d+"\"><em class=\"pathway__occupation-skill-overlap\">"+percentageDistance(o[l].dist_all)+"% skill overlap</em><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+o[l].soc_code+"\" target=\"_blank\" class=\"pathway__occupation-title\" data-full-title=\""+o[l].title+"\">"+r+"</a><div class=\"pathway__occupation-automation\"><span class=\"pathway__label\">Risk of automation</span><span class=\"pathway__value\">"+_.automation_percent+"%</span></div><!-- End .pathway__automation-risk --><div class=\"pathway__occupation-salary\"><span class=\"pathway__label\">Median salary</span><span class=\"pathway__value\">$"+c+"</span></div><!-- End .pathway__salary --><div><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+o[l].soc_code+"\" class=\"jobs-link\" target=\"_blank\">Jobs &amp; Training</a><a href=\"#\" class=\"pathway__occupation-btn pathway__occupation-add-btn\" data-occ-title=\""+o[l].title+"\" data-soc-code=\""+o[l].soc_code+"\" data-id=\"btn-"+d+"\">Add to path</a></div><span class=\"pathway__plus-btn\"></span><span class=\"pathway__divider\"></span><span class=\"pathway__collapsed-occupations\"></span></div><!-- End .pathway__occupation -->"),n++}var u=0;a(s+" .pathway__occupation").each(function(){var e=a(this);setTimeout(function(){e.css({opacity:"1",left:"0"})},u),u+=150}),setTimeout(function(){a(s+" .pathway__occupation").css({opacity:"",left:""}),copyDesktopOccupations(),e(p,"collapse")},1100),a("[data-toggle=\"tooltip\"]").tooltip()}else a(s+" .pathway__occupation").remove(),a(s).find(".loading").css("opacity","0"),a(s).append("<p class=\"no-pathway-results text-danger\">No occupations returned.</p>")},error:function(a){console.log(a)}})}function c(e,t,o){a.ajax({type:"GET",url:EPP_DATA.api_url+"/occupation/distance/"+e+"?rows_limit=5&soc_exclude="+t,beforeSend:function(a){a.setRequestHeader("x-api-key",EPP_DATA.api_key)},success:function(e){var t=e.overlap.data.rows;if(0<t.length){var s=1;a("".concat(o," .pathway__occupation, ").concat(o," .no-pathway-results")).remove();for(var p=0;p<t.length;p++){var n,l=truncateTitle(t[p].title,25),c=automationPercent(t[p].risk_end);n=null==t[p].salarymax_end?"--":numberWithCommas(t[p].salarymax_end);var r=createPathwayID(o,t[p].soc_code);a(o).find(".loading").css("opacity","0"),a(o).append("<div class=\"pathway__occupation pathway__occupation--"+s+"\" data-soc-code=\""+t[p].soc_code+"\" data-id=\"occ-"+r+"\"><em class=\"pathway__occupation-skill-overlap\">"+percentageDistance(t[p].dist_all)+"% skill overlap</em><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+t[p].soc_code+"\" target=\"_blank\" class=\"pathway__occupation-title\" data-full-title=\""+t[p].title+"\">"+l+"</a><div class=\"pathway__occupation-automation\"><span class=\"pathway__label\">Risk of automation</span><span class=\"pathway__value\">"+c.automation_percent+"%</span></div><!-- End .pathway__automation-risk --><div class=\"pathway__occupation-salary\"><span class=\"pathway__label\">Median salary</span><span class=\"pathway__value\">$"+n+"</span></div><!-- End .pathway__salary --><div><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+t[p].soc_code+"\" class=\"jobs-link\" target=\"_blank\">Jobs &amp; Training</a><a href=\"#\" class=\"pathway__occupation-btn pathway__occupation-add-btn\" data-occ-title=\""+t[p].title+"\" data-soc-code=\""+t[p].soc_code+"\" data-id=\"btn-"+r+"\">Add to path</a></div><span class=\"pathway__plus-btn\"></span><span class=\"pathway__divider\"></span><span class=\"pathway__collapsed-occupations\"></span></div>"),s++}setTimeout(function(){a(".loading--mobile").hide(),a(o).removeClass("d-none")},300),setTimeout(function(){a(o).css({opacity:"1",transform:"translateY(0)"})},600),setTimeout(function(){copyMobileOccupations()},900),a("[data-toggle=\"tooltip\"]").tooltip()}else a(o+" .pathway__occupation").remove(),a(o).find(".loading").css("opacity","0"),a(o).append("<p class=\"no-pathway-results text-danger\">No occupations returned.</p>")},error:function(a){console.log(a)}})}a(function(){if(0<a(".pathway__occupation").length){localStorage.setItem("epp_mvp_last_clicked",".pathway__occupation--start"),localStorage.setItem("epp_mvp_saved_path",0);var l=window.location.search;if(-1===l.indexOf("action=edit"))if(null===localStorage.getItem("epp_mvp_current_path")){var c=createOccupationObj(a(".pathway__occupation--start")),i={path_1:c};localStorage.setItem("epp_mvp_current_path",JSON.stringify(i))}else{var i=localStorage.getItem("epp_mvp_current_path"),i=JSON.parse(i),r=createOccupationObj(a(".pathway__occupation--start"));i.path_1=r,delete i.path_2,delete i.path_3,delete i.path_4,localStorage.setItem("epp_mvp_current_path",JSON.stringify(i))}copyDesktopOccupations()}a(document).on("click",".pathway__occupation-add-btn",function(s){s.preventDefault();var e=a(this),p=e.closest(".pathway__occupation").attr("data-id");localStorage.setItem("epp_mvp_last_clicked",p),isMobile()?(o(e),n(e),copyMobileOccupations()):(t(e),n(e),copyDesktopOccupations())}),a(document).on("click",".pathway__occupation-matches-btn",function(){var e=a(this),t=e.closest(".pathway__occupation").attr("data-id");return localStorage.setItem("epp_mvp_last_clicked",t),e.closest(".pathway__group").hasClass("pathway__group--2")?a(".pathway__progress .step3").addClass("selected"):e.closest(".pathway__group").hasClass("pathway__group--3")&&a(".pathway__progress .step4").addClass("selected"),isMobile()?(e.closest(".pathway__occupation").siblings(".pathway__occupation").addClass("shrink"),p(a(this)),updateActionsDiv(),e.closest(".pathway__group").hasClass("pathway__group--2")?a(".pathway__occupation--start").addClass("collapsed"):e.closest(".pathway__group").prev(".pathway__group").find(".pathway__occupation.expanded").addClass("collapsed")):(s(a(this)),updateActionsDiv()),!1}),a(document).on("click",".pathway__expand-btn",function(){var t,o=a(this);return t=0<o.closest(".pathway__group").find(".pathway__occupation.active").length?o.closest(".pathway__group").find(".pathway__occupation.active .pathway__occupation-btn"):0<o.closest(".pathway__group").find(".pathway__occupation.expanded").length?o.closest(".pathway__group").find(".pathway__occupation.expanded .pathway__occupation-btn"):o.closest(".pathway__group").find(".pathway__occupation.selected .pathway__occupation-btn"),e(t,"expand"),o.hide(),!1}),a(document).on("click",".pathway__collapse-btn",function(){var t,o=a(this);return t=0<o.closest(".pathway__group").find(".pathway__occupation.active").length?o.closest(".pathway__group").find(".pathway__occupation.active .pathway__occupation-btn"):0<o.closest(".pathway__group").find(".pathway__occupation.expanded").length?o.closest(".pathway__group").find(".pathway__occupation.expanded .pathway__occupation-btn"):o.closest(".pathway__group").find(".pathway__occupation.selected .pathway__occupation-btn"),e(t,"collapse"),o.hide(),!1}),a(document).on("click",".pathway__plus-btn",function(){var e=localStorage.getItem("epp_mvp_current_path"),e=JSON.parse(e);return a(this).closest(".pathway__occupation").hasClass("selected")||a(this).closest(".pathway__occupation").hasClass("active")||a(this).closest(".pathway__occupation").hasClass("expanded")||a(this).closest(".pathway__occupation").hasClass("collapsed")?a(this).closest(".pathway__occupation").hasClass("selected")&&(a(this).closest(".pathway__occupation").removeClass("selected"),a(this).closest(".pathway__occupation").find(".pathway__occupation-btn").removeClass("pathway__occupation-matches-btn").addClass("pathway__occupation-add-btn").text("Add to Path"),a(this).closest(".pathway__group").hasClass("pathway__group--2")?(delete e.path_2,delete e.path_3,delete e.path_4,a(".pathway__progress .step2, .pathway__progress .step3, .pathway__progress .step4").removeClass("selected active"),a(".pathway__progress .step2").addClass("selected")):a(this).closest(".pathway__group").hasClass("pathway__group--3")?(delete e.path_3,delete e.path_4,a(".pathway__progress .step3, .pathway__progress .step4").removeClass("selected active"),a(".pathway__progress .step3").addClass("selected")):a(this).closest(".pathway__group").hasClass("pathway__group--4")&&(delete e.path_4,a(".pathway__progress .step4").removeClass("active").addClass("selected")),localStorage.setItem("epp_mvp_current_path",JSON.stringify(e)),setTimeout(function(){copyMobileOccupations()})):a(this).closest(".pathway__occupation").find(".pathway__occupation-btn")[0].click(),!1}),a(document).on("click",".view-active-pathway",function(){return a(this).toggleClass("active"),a(".pathway__groups, .mobile-pathway__groups, .pathway__progress-wrap").toggleClass("d-none"),a(".current-path-holder").toggleClass("visible"),a(".pathways__actions > div").toggleClass("viewing-current-path"),!1})}),a("body").hasClass("page-template-page-pathways")&&(a(".loading--mobile").hide(),window.onbeforeunload=function(){localStorage.setItem("epp_mvp_unsaved_path_name",a("#pathway-name-input").val()),localStorage.setItem("epp_mvp_unsaved_path",localStorage.getItem("epp_mvp_current_path")),localStorage.setItem("epp_mvp_redirect_url",EPP_DATA.site_url+"/saved-pathways/")})}(jQuery),function(a){"use strict";function e(){var e=1;a(".saved-pathway__actions").each(function(){a(this).find(".saved-pathway__delete-btn").attr("data-row-index",e),a(this).find(".input--edit-path-name").attr("data-row-index",e),e++})}a(function(){a(document).on("click",".save-pathway-popup",function(t){if(a(this).hasClass("disabled"))t.preventDefault(),location.href=EPP_DATA.site_url+"/saved-pathways/";else{var e=localStorage.getItem("epp_mvp_current_path");if(e=JSON.parse(e),void 0!==e.path_2){var o=a(".input--save-path-name").val();("name this path"!=o||""!=o)&&(a("#pathway-name-input").val(o),a("label[for=\"pathway-name-input\"]").addClass("focused")),a("#name-your-pathway").modal("show"),a("#pathway-name-input").focus()}else void 0===e.path_2&&alert("You must select 2 or more occupations!");return!1}}),a("#name-your-pathway-form").on("submit",function(e){e.preventDefault(),a(".pathway-name-msg").removeClass("error").addClass("d-none");var t=a("#pathway-name-input").val(),o=a(".input--save-path-name").attr("data-row-index"),s=localStorage.getItem("epp_mvp_current_path");s=JSON.parse(s);var p,n={name:t,row_index:o,pathways:s},l=window.location.search;p=-1===l.indexOf("action=edit")?EPP_DATA.site_url+"/wp-json/api/v1/pathways/save":EPP_DATA.site_url+"/wp-json/api/v1/pathways/update",a.ajax({type:"POST",url:p,data:JSON.stringify(n),dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(e){0<e?(a("#name-your-pathway").modal("hide"),a(".alert-danger").addClass("d-none"),a(".alert-success").removeClass("d-none"),a(".pathways__name-current-path span").html(t),a(".pathways__name-current-path .input--save-path-name").attr("data-initial-value",t),localStorage.setItem("epp_mvp_saved_path",1),localStorage.setItem("epp_mvp_unsaved_path_name",""),localStorage.setItem("epp_mvp_unsaved_path",""),localStorage.setItem("epp_mvp_save_user_path",0),isMobile()&&goToByScroll("#pathway__group--start",500,200)):0==e?(a(".alert-success").addClass("d-none"),a(".alert-danger").removeClass("d-none")):-1==e&&(a("#pathway-name-input").addClass("is-invalid"),a(".pathway-name-msg").addClass("error").removeClass("d-none"))},error:function(a){console.log(a)}})}),0<a(".saved-pathway").length&&(a(".saved-pathway").each(function(){var e=a(this).find(".col-md-3").length;a(this).addClass("saved-pathway-children-"+e),a(this).prev(".saved-pathway__actions").addClass("row-flushed-children-"+e),a(this).prev(".saved-pathway__actions").find(".saved-pathway__open-btn").attr("data-total-occ",e)}),a(".saved-pathway").each(function(){var e=a(this),t=a(this).find(".saved-pathway__occupation").first().attr("data-soc-code");a(this).prev(".saved-pathway__actions").find(".saved-pathway__open-btn").attr("data-start-occ",t)}),a(document).on("click",".saved-pathway__open-btn--mobile .button",function(){return a(this).closest(".saved-pathway__open-btn--mobile").prevAll(".saved-pathway__actions").first().find(".saved-pathway__open-btn")[0].click(),!1})),a(document).on("click",".saved-pathway__delete-btn",function(){var e=a(this).attr("data-row-index");return a(".button--delete-saved").attr("data-row-index",e),a(this).closest(".row-flushed").addClass("to-be-removed"),a(this).closest(".row-flushed").next(".saved-pathway").addClass("to-be-removed"),a(this).closest(".row-flushed").nextAll(".saved-pathway__open-btn--mobile:first").addClass("to-be-removed"),a("#delete-saved-modal").modal("show"),!1}),a("#delete-saved-modal").on("hidden.bs.modal",function(){a(".row-flushed, .saved-pathway, .saved-pathway__open-btn--mobile").removeClass("to-be-removed"),a(".button--delete-saved").attr("data-row-index","")}),a(document).on("click",".button--delete-saved",function(){var t=a(this),o=t.attr("data-row-index");return a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/pathways/delete",data:{row_index:o},dataType:"json",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(t){console.log(t),1==t&&(a("#delete-saved-modal").modal("hide"),a(".row-flushed.to-be-removed, .saved-pathway.to-be-removed, .saved-pathway__open-btn--mobile.to-be-removed").remove(),setTimeout(function(){e()},100)),0==t&&(a("#delete-saved-modal").modal("hide"),console.log("There was an error deleting pathway!"))},error:function(a){console.log(a)}}),!1}),a(document).on("click",".saved-pathway__name--edit-btn",function(){return a(this).siblings("span").hide(),a(this).siblings(".input--edit-path-name").show().focus(),!1}),a(".input--edit-path-name").blur(function(){var e=a(this),t=e.attr("data-initial-value"),o=e.val(),s=e.attr("data-row-index");if(t!=o&&""!=o){a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/pathways/edit",data:{name:o,row_index:s},dataType:"json",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(a){console.log(a),0!=o&&(e.siblings("span").text(o),e.siblings("span").show(),e.hide(),e.attr("data-initial-value",o))},error:function(a){console.log(a)}})}else e.siblings("span").show(),e.hide()}),a(".input--edit-path-name").keyup(function(e){var t=a(this).attr("data-initial-value");(13===e.keyCode||13===e.which||9===e.keyCode||9===e.which)&&a(this).blur(),(27===e.keyCode||27===e.which)&&(a(this).siblings("span").show(),a(this).hide(),a(this).val(t))}),a(document).on("click",".pathways__name--edit-btn",function(){return a(this).siblings("span").hide(),a(this).siblings(".input--save-path-name").show().focus(),!1}),a(".input--save-path-name").blur(function(){var e=a(this),t=e.attr("data-initial-value"),o=e.val();o&&""!==o?(e.siblings("span").text(o),e.siblings("span").show(),e.hide(),e.attr("data-initial-value",o)):""===o?(e.siblings("span").text("name this path"),e.siblings("span").show(),e.hide(),e.attr("data-initial-value","name this path")):(e.siblings("span").show(),e.hide())}),a(".input--save-path-name").keyup(function(e){var t=a(this),o=t.attr("data-initial-value");(13===e.keyCode||13===e.which||9===e.keyCode||9===e.which)&&t.blur(),(27===e.keyCode||27===e.which)&&(t.siblings("span").show(),t.hide(),t.val(""),"name this path"!=o&&t.val(o))}),a(document).on("click",".save-not-logged-in",function(){var e=a(this).attr("href");return"#"==e?a("#redirect-after-login").val(""):a("#redirect-after-login").val(e),a("#name-your-pathway").modal("hide"),launchLoginPopup(),localStorage.setItem("epp_mvp_save_user_path",1),!1})})}(jQuery),function(a){"use strict";a(function(){a("#build-pathway-input").autocomplete({source:function(e,t){var o=a.ui.autocomplete.escapeRegex(e.term),s=new RegExp("^"+o,"i"),p=a.grep(occupationTitles,function(a){return s.test(a.label||a.value||a)}),n=new RegExp(o,"i"),l=a.grep(occupationTitles,function(e){return 0>a.inArray(e,p)&&n.test(e.label||e.value||e)}),c=p.concat(l);t(c.slice(0,5))},appendTo:"#pathway-autocomplete-container",open:function(){var e=a(".build-pathway-autocomplete").css("top");e=parseFloat(e),a(".build-pathway-autocomplete").css("top",e-50+"px")},change:function(a,e){null!=e.item&&(location.href=EPP_DATA.site_url+"/pathways/?soc_code="+e.item.value)},select:function(e,t){e.preventDefault(),a("#build-pathway-input").val(t.item.label),null!=t.item&&(location.href=EPP_DATA.site_url+"/pathways/?soc_code="+t.item.value)},focus:function(e,t){e.preventDefault(),a("#build-pathway-input").val(t.item.label)},response:function(e,t){0===t.content.length?a("#build-pathway-input").removeClass("has-value"):a("#build-pathway-input").addClass("has-value")},classes:{"ui-autocomplete":"build-pathway-autocomplete"},close:function(){a("#build-pathway-input").removeClass("has-value")}}),a(".build-pathway-form").on("submit",function(e){e.preventDefault();var t=a("#build-pathway-input").val();a("#build-pathway-input").autocomplete("search",t).focus()}),a("#build-pathway-input--mobile").autocomplete({source:function(e,t){var o=a.ui.autocomplete.escapeRegex(e.term),s=new RegExp("^"+o,"i"),p=a.grep(occupationTitles,function(a){return s.test(a.label||a.value||a)}),n=new RegExp(o,"i"),l=a.grep(occupationTitles,function(e){return 0>a.inArray(e,p)&&n.test(e.label||e.value||e)}),c=p.concat(l);t(c.slice(0,5))},appendTo:"#pathway-autocomplete-container--mobile",open:function(){var e=a(".build-pathway-autocomplete--mobile").css("top");e=parseFloat(e),a(".build-pathway-autocomplete--mobile").css("top",e-50+"px")},change:function(a,e){null!=e.item&&(location.href=EPP_DATA.site_url+"/pathways/?soc_code="+e.item.value)},select:function(e,t){e.preventDefault(),a("#build-pathway-input--mobile").val(t.item.label),null!=t.item&&(location.href=EPP_DATA.site_url+"/pathways/?soc_code="+t.item.value)},focus:function(e,t){e.preventDefault(),a("#build-pathway-input--mobile").val(t.item.label)},response:function(e,t){0===t.content.length?a("#build-pathway-input--mobile").removeClass("has-value"):a("#build-pathway-input--mobile").addClass("has-value")},classes:{"ui-autocomplete":"build-pathway-autocomplete--mobile"},close:function(){a("#build-pathway-input--mobile").removeClass("has-value")}}),a(".build-pathway-form--mobile").on("submit",function(e){e.preventDefault();var t=a("#build-pathway-input--mobile").val();a("#build-pathway-input--mobile").autocomplete("search",t).focus()}),a(".input__start-new-path").autocomplete({source:function(e,t){var o=a.ui.autocomplete.escapeRegex(e.term),s=new RegExp("^"+o,"i"),p=a.grep(occupationTitles,function(a){return s.test(a.label||a.value||a)}),n=new RegExp(o,"i"),l=a.grep(occupationTitles,function(e){return 0>a.inArray(e,p)&&n.test(e.label||e.value||e)}),c=p.concat(l);t(c.slice(0,5))},appendTo:"#start-pathway-autocomplete-container",select:function(e,t){e.preventDefault(),a(".input__pathway-starting-occ").val(t.item.label),a(".pathway__start-path-btn").attr("data-soc-code",t.item.value);var o=t.item.value;a.getJSON(EPP_DATA.site_url+"/epp-occupation-details.json",function(e){var t=parseFloat(e[o].auto_risk),s=Math.round(100*t);s=s.toString()+"%";var p=calculateMedianSalary(e[o].salary_min,e[o].salary_max);a(".pathway__occupation--start .pathway__occupation-automation .pathway__value").text(s),a(".pathway__occupation--start .pathway__occupation-salary .pathway__value").text("$"+p.toString()),a(".input__pathway-starting-occ").attr("data-prev-title",e[o].title)}),a(".pathway__start-path-btn")[0].click(),goToByScroll("#pathway__group--start",500,100)},focus:function(e,t){e.preventDefault(),a(".input__pathway-starting-occ").val(t.item.label)},classes:{"ui-autocomplete":"start-pathway-autocomplete"}}),a(document).on("click",".pathway__start-path-btn",function(){var e=a(this).attr("data-soc-code");return""!=e&&(isMobile()?(a(".mobile-pathway__groups .pathway__group--2").css({opacity:"0",transform:"translateY(-100px)"}),a(".loading--mobile").show(),a(".pathway__group--2").removeClass("d-none"),a(".mobile-pathway__groups .pathway__group").removeClass("has-active"),a(".pathway__group--2 .pathway__occupation, .pathway__group--2 .no-pathway-results, .pathway__group--3 .pathway__occupation, .pathway__group--3 .no-pathway-results, .pathway__group--4 .pathway__occupation, .pathway__group--4 .no-pathway-results").remove(),getMobileFirstGroup(e,e,".mobile-pathway__groups .pathway__group--2")):(a(".pathway__group--2 .loading").css("opacity","1"),a(".pathway__group--2").removeClass("d-none"),getFirstGroup(e,e,".pathway__group--2")),a(".input__start-new-path").blur(),a(".pathway__progress .step3, .pathway__progress .step4").removeClass("selected active"),a(".pathway__progress .step2").removeClass("active").addClass("selected")),!1}),a(".start-new-path-form--desktop").on("submit",function(e){e.preventDefault();var t=a(".input__start-new-path").val();a(".input__start-new-path").autocomplete("search",t).blur()}),a(".input__start-new-path").blur(function(){var e=a(this).attr("data-prev-title");a(this).val()||(a(".input__pathway-starting-occ").val(e),a(".start-new-path__clear").removeClass("focused"))}),a(".input__start-new-path").keyup(function(){""==a(".input__start-new-path").val()?(a(".start-new-path__clear").removeClass("focused"),a(".pathway__start-path-btn").removeClass("attention-bounce")):a(".start-new-path__clear").addClass("focused")}),a(document).on("click",".start-new-path__clear",function(){return a(".input__start-new-path").val("").focus(),a(".pathway__start-path-btn").removeClass("attention-bounce"),!1})})}(jQuery);function getFirstGroup(a,e,t){$.ajax({type:"GET",url:EPP_DATA.api_url+"/occupation/distance/"+a+"?rows_limit=5&soc_exclude="+e,beforeSend:function(a){a.setRequestHeader("x-api-key",EPP_DATA.api_key)},success:function(a){var e=a.overlap.data.rows;if(0<e.length){var o=1;$(".pathway__group--3 .pathway__occupation, .pathway__group--4 .pathway__occupation").remove(),$(".pathway__group--3 .expand-btn, .pathway__group--3 .collapse-btn, .pathway__group--4 .expand-btn, .pathway__group--4 .collapse-btn").hide(),$(".pathway__group--3, .pathway__group--4").addClass("d-none"),$("".concat(t," .pathway__occupation, ").concat(t," .no-pathway-results")).remove(),$(".pathways__actions-btns").removeClass("empty-occ"),$(".pathways__name-current-path").removeClass("initial-state");for(var s=0;s<e.length;s++){var p,n=truncateTitle(e[s].title,25),l=automationPercent(e[s].risk_end);p=null==e[s].salarymax_end?"--":numberWithCommas(e[s].salarymax_end);var c=createPathwayID(t,e[s].soc_code);$(t).find(".loading").css("opacity","0"),$(t).append("<div class=\"pathway__occupation pathway__occupation--"+o+"\" data-soc-code=\""+e[s].soc_code+"\" style=\"opacity: 0; left: -50px;\" data-id=\"occ-"+c+"\"><em class=\"pathway__occupation-skill-overlap\">"+percentageDistance(e[s].dist_all)+"% skill overlap</em><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+e[s].soc_code+"\" target=\"_blank\" class=\"pathway__occupation-title\" data-full-title=\""+e[s].title+"\">"+n+"</a><div class=\"pathway__occupation-automation\"><span class=\"pathway__label\">Risk of automation</span><span class=\"pathway__value\">"+l.automation_percent+"%</span></div><!-- End .pathway__automation-risk --><div class=\"pathway__occupation-salary\"><span class=\"pathway__label\">Median salary</span><span class=\"pathway__value\">$"+p+"</span></div><!-- End .pathway__salary --><div><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+e[s].soc_code+"\" class=\"jobs-link\" target=\"_blank\">Jobs &amp; Training</a><a href=\"#\" class=\"pathway__occupation-btn pathway__occupation-add-btn\" data-occ-title=\""+e[s].title+"\" data-soc-code=\""+e[s].soc_code+"\" data-id=\"btn-"+c+"\">Add to path</a></div><span class=\"pathway__plus-btn\"></span><span class=\"pathway__divider\"></span><span class=\"pathway__collapsed-occupations\"></span></div>"),o++}var r=0;$(t+" .pathway__occupation").each(function(){var a=$(this);setTimeout(function(){a.css({opacity:"1",left:"0"})},r),r+=150}),setTimeout(function(){$(t+" .pathway__occupation").css({opacity:"",left:""}),copyDesktopOccupations()},1100),$(t).find("expand-btn").hide(),$(".pathway__start-path-btn").removeClass("initial-state"),$("[data-toggle=\"tooltip\"]").tooltip()}else $(t+" .pathway__occupation").remove(),$(t).find(".loading").css("opacity","0"),$(t).append("<p class=\"no-pathway-results text-danger\">No occupations returned.</p>")},error:function(a){console.log(a)}})}function getMobileFirstGroup(a,e,t){$.ajax({type:"GET",url:EPP_DATA.api_url+"/occupation/distance/"+a+"?rows_limit=5&soc_exclude="+e,beforeSend:function(a){a.setRequestHeader("x-api-key",EPP_DATA.api_key)},success:function(a){var e=a.overlap.data.rows;if(0<e.length){var o=1;$(".pathways__actions-btns").removeClass("empty-occ"),$(".pathways__name-current-path").removeClass("initial-state");for(var s=0;s<e.length;s++){var p,n=truncateTitle(e[s].title,25),l=automationPercent(e[s].risk_end);p=null==e[s].salarymax_end?"--":numberWithCommas(e[s].salarymax_end);var c=createPathwayID(t,e[s].soc_code);$(t).find(".loading").css("opacity","0"),$(t).removeClass("has-active").append("<div class=\"pathway__occupation pathway__occupation--"+o+"\" data-soc-code=\""+e[s].soc_code+"\" data-id=\"occ-"+c+"\"><em class=\"pathway__occupation-skill-overlap\">"+percentageDistance(e[s].dist_all)+"% skill overlap</em><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+e[s].soc_code+"\" target=\"_blank\" class=\"pathway__occupation-title\" data-full-title=\""+e[s].title+"\">"+n+"</a><div class=\"pathway__occupation-automation\"><span class=\"pathway__label\">Risk of automation</span><span class=\"pathway__value\">"+l.automation_percent+"%</span></div><!-- End .pathway__automation-risk --><div class=\"pathway__occupation-salary\"><span class=\"pathway__label\">Median salary</span><span class=\"pathway__value\">$"+p+"</span></div><!-- End .pathway__salary --><div><a href=\""+EPP_DATA.site_url+"/occupation/?soc_code="+e[s].soc_code+"\" class=\"jobs-link\" target=\"_blank\">Jobs &amp; Training</a><a href=\"#\" class=\"pathway__occupation-btn pathway__occupation-add-btn\" data-occ-title=\""+e[s].title+"\" data-soc-code=\""+e[s].soc_code+"\" data-id=\"btn-"+c+"\">Add to path</a></div><span class=\"pathway__plus-btn\"></span><span class=\"pathway__divider\"></span><span class=\"pathway__collapsed-occupations\"></span></div>"),o++}setTimeout(function(){$(".loading--mobile").hide(),$(t).removeClass("d-none")},300),setTimeout(function(){$(t).css({opacity:"1",transform:"translateY(0)"})},600),setTimeout(function(){copyMobileOccupations(),$(".mobile-pathway__groups .pathway__occupation.shrink").css("overflow","hidden")},900),$(".pathway__start-path-btn").removeClass("initial-state"),$("[data-toggle=\"tooltip\"]").tooltip()}else $(t+" .pathway__occupation").remove(),$(t).find(".loading").css("opacity","0"),$(t).append("<p class=\"no-pathway-results text-danger\">No occupations returned.</p>")},error:function(a){console.log(a)}})}(function(a){"use strict";a(function(){if(a(".change-password-fields").hide(),0<a(".profile__photo--thumb img").length){var e=a(".profile__photo--thumb img").width(),t=a(".profile__photo--thumb img").height();t<e&&a(".profile__photo--thumb img").css({height:"100%",width:"auto"})}a(".form--update-profile").on("submit",function(e){e.preventDefault(),a(".profile__content--user-info .form-feedback").empty().addClass("d-none").removeClass("error");var t=a("#user-fullname").val();t=t.trim();var o=t.substr(0,t.indexOf(" ")),s=t.substr(t.indexOf(" ")+1),p=a("input[name=\"gender\"]:checked").val();if("Custom"==p)var n=a("#custom-gender-input").val();else var n=p;var l=a("#birth-month").val(),c=a("#birth-day").val(),i=a("#birth-year").val();if(a("#receive-notifications").prop("checked"))var r="y";if(!a("#receive-notifications").prop("checked"))var r="n";var _={firstname:o,lastname:s,gender:n,gender_type:p,month:l,day:c,year:i,notifications:r};console.log(_),a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/account/update",data:_,dataType:"json",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(e){console.log(e),1==e.result_code&&(window.location.href=EPP_DATA.site_url+"/profile/"),0==e.result_code&&(a(".profile__content--user-info .form-feedback").removeClass("d-none success").addClass("error").append(e.message),a("html,body").animate({scrollTop:0},200))},error:function(a){console.log(a)}})}),a("#change-password-form").on("submit",function(e){e.preventDefault(),a(".form--change-password .form-feedback").empty().addClass("d-none").removeClass("error");var t=a("#old-password").val(),o=a("#new-password").val();a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/account/update",data:{oldpass:t,newpass:o},dataType:"json",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(e){2==e.result_code&&(a(".form--change-password .form-feedback").removeClass("d-none error").addClass("success").append(e.message),a("#change-password-form input[type=\"password\"]").val(""),a("#change-password-form input").blur(),a("#change-password-form")[0].reset()),1==e.result_code&&a(".form--change-password .form-feedback").removeClass("d-none success").addClass("error").append(e.message)},error:function(a){console.log(a)}})}),a("#photofile").mouseover(function(){a(".profile__photo--delete").css({opacity:"1","z-index":"999"})}),a("#photofile").mouseout(function(){a(".profile__photo--delete").css({opacity:"","z-index":""})}),a(".profile__photo--delete").mouseover(function(){a(".input--photo").addClass("hover")}),a(".profile__photo--delete").mouseout(function(){a(".input--photo").removeClass("hover")}),a("#photofile").change(function(t){var e=t.target.files[0].name,o=e.substr(e.lastIndexOf(".")+1);"jpg"==o||"png"==o||"jpeg"==o||"gif"==o?(a(".profile__photo--thumb img").css("opacity","0"),a(".form--photo-upload .loading").css("opacity","1"),a("#upload-submit")[0].click()):alert("Please choose a .jpg, .png, .gif or .jpeg file")}),a(document).on("click",".change-password-btn",function(){return a(".change-password-fields").slideToggle(500),!1}),a(document).on("click",".forgot-password-btn",function(){return a(this).hide(),a(".button--send-password-reset").removeClass("d-none"),!1}),a(document).on("click",".profile__photo--delete",function(){return a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/account/delete-photo",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",EPP_DATA.nonce)},success:function(a){console.log(a),1==a?location.reload():console.log("There was an error processing the request.")},error:function(a){console.log(a)}}),!1})})})(jQuery),function(a){"use strict";a(function(){var e=new ScrollMagic.Controller;new ScrollMagic.Scene({triggerElement:".home-section--slider",triggerHook:0,offset:80}).setClassToggle(".site-header","solid").addTo(e),new ScrollMagic.Scene({triggerElement:".home-section--slider",triggerHook:0,offset:80}).setTween(".goo-1",{marginRight:"30%",ease:Linear.easeNone}).addTo(e).duration(a(".slider").outerHeight()),new ScrollMagic.Scene({triggerElement:".home-section--slider",triggerHook:0}).setTween(".ball",{marginTop:"-20%",ease:Linear.easeNone}).addTo(e).duration(a(".slider").outerHeight()),new ScrollMagic.Scene({triggerElement:".home-section--about",triggerHook:"onEnter"}).setClassToggle(".home-section--about","on-screen").addTo(e),new ScrollMagic.Scene({triggerElement:".how-it-works__info.first",triggerHook:"onEnter",offset:100}).setClassToggle(".how-it-works__info.first","on-screen").on("enter",function(){var e=EPP_DATA.assets_url+"/illustrations/girl-2_2x.png",t=EPP_DATA.assets_url+"/illustrations/girl-2_loop-1_2x.gif";a(".how-it-works__info .girl-2").attr("src",t)}).addTo(e),new ScrollMagic.Scene({triggerElement:".how-it-works__info.second",triggerHook:"onEnter",offset:100}).setClassToggle(".how-it-works__info.second","on-screen").on("enter",function(){var e=EPP_DATA.assets_url+"/illustrations/guy-1_2x.png",t=EPP_DATA.assets_url+"/illustrations/guy-1_loop-1_2x.gif";a(".how-it-works__info .guy-1").attr("src",t)}).addTo(e),new ScrollMagic.Scene({triggerElement:".how-it-works__info.third",triggerHook:"onEnter",offset:100}).setClassToggle(".how-it-works__info.third","on-screen").on("enter",function(){var e=EPP_DATA.assets_url+"/illustrations/guy-2_2x.png",t=EPP_DATA.assets_url+"/illustrations/guy-2_loop-1_2x.gif";a(".how-it-works__info .guy-2").attr("src",t)}).addTo(e),new ScrollMagic.Scene({triggerElement:".home-section--video"}).setClassToggle(".home-section--video .embed-responsive","on-screen").addTo(e),new ScrollMagic.Scene({triggerElement:".home-section--future-of-work"}).setClassToggle(".home-section--future-of-work .report","on-screen").addTo(e),new ScrollMagic.Scene({triggerElement:".home-section--future-of-work",triggerHook:"onLeave"}).setClassToggle(".home__cta","on-screen").addTo(e),new ScrollMagic.Scene({triggerElement:"#page-wrapper",triggerHook:0,offset:60}).setClassToggle(".mobile-menu-bar, .search-occupations-btn","solid").addTo(e),new ScrollMagic.Scene({triggerElement:".site-footer-wrap",triggerHook:"onEnter"}).setClassToggle(".home-section--partners","on-screen").addTo(e),new ScrollMagic.Scene({triggerElement:"#general"}).setClassToggle(".faq__nav-item--general","active").duration(parseFloat(a("#accordion--general").outerHeight())+95).addTo(e),new ScrollMagic.Scene({triggerElement:"#occupation"}).setClassToggle(".faq__nav-item--occupation","active").duration(parseFloat(a("#accordion--occupation").outerHeight())+95).addTo(e),new ScrollMagic.Scene({triggerElement:"#education"}).setClassToggle(".faq__nav-item--education","active").duration(parseFloat(a("#accordion--education").outerHeight())+95).addTo(e),new ScrollMagic.Scene({triggerElement:"#jobs"}).setClassToggle(".faq__nav-item--jobs","active").addTo(e)})}(jQuery),function(a){"use strict";a(function(){a(document).on("click",".sign-up-btn, .launch-signup",function(){return launchSignupPopup(),!1}),a("#signup-form").on("submit",function(e){e.preventDefault(),a(".popup__form--signup .form-feedback").empty().addClass("d-none").removeClass("error"),a("#user-email").css("border-color","");var t=a("#fullname").val(),o=a("#user-email").val(),s=a("#user-password").val(),p={fullname:t,email:o,password:s};return a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/signup",data:p,dataType:"json",beforeSend:function(a){a.setRequestHeader("X-EPP-WP-Key",EPP_DATA.epp_key)},success:function(e){1==e.result_code&&(a(".popup__form--signup .form-feedback").removeClass("d-none error").addClass("success").append(e.message),a.ajax({type:"POST",url:EPP_DATA.site_url+"/wp-json/api/v1/login",data:p,dataType:"json",beforeSend:function(a){a.setRequestHeader("X-EPP-WP-Key",EPP_DATA.epp_key)},success:function(e){1==e.result_code?location.reload():(a(".popup__form--signup .form-feedback").removeClass("d-none success").addClass("error").append(e.message),a("#user-email").css("border-color","red"))},error:function(a){console.log(a)}})),0==e.result_code&&(a(".popup__form--signup .form-feedback").removeClass("d-none success").addClass("error").append(e.message),a("#user-email").css("border-color","red")),2==e.result_code&&a(".popup__form--signup .form-feedback").removeClass("d-none success").addClass("error").append(e.message)}}),!1}),a(window).keyup(function(e){a(".popup--signup").hasClass("active")&&(27===e.keyCode||27===e.which)&&closePopupsEtAl()})})}(jQuery);